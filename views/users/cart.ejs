<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CART</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="./stylesheet/cart.css" />
  <style>
    .produtimagestyle {
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      width: 40vh;
      margin: 20px;
      border: 1px black solid;
      border-radius: 10px;

    }
  </style>
</head>

<body>
  <%- include('../partials/navbar') %>
    <main class="container">
      <section class="row justify-content-center">
        <%- include('../partials/flash') %>
          <h1 class="display-1 test-center">Cart</h1>

          <% if(user.cart.length===0) {%>
            <div class="col-6">
              <div class="card">
                <h2 class="display-5">Cart is empty <span class="material-icons">error_ouline</span></h2>
              </div>
            </div>
            <% } else {%>

              <% for(let item of user.cart) {%>
                <div class="col-lg-4 col-md-5 col-sm-6 col-xs-7 produtimagestyle"
                  style="background-image: url(<%= item.productImageUrl %>);">
                  <!--showing error in above line but it is warning because css doesnt suport ejs format so it will work-->
                  <div class="text-center">
                    <div>
                      <h3 class="display-6" style="opacity: 0.9;">
                       <span style="background-color:white;"> <%= item.name %></span>
                      </h3>
                      <h4 class="display-7" style="opacity: 0.9;"><span style="background-color:white;">Rs <%= item.price %></span>
                      </h4>
                      <div class="card-body justify-content-center">
                        <form action="/cart/<%= item._id%>?_method=DELETE" method="POST">
                          <button class="btn btn-danger">
                            Delete <span class="material-icons">delete</span>
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
                <% } %>
                  <% } %>
                    </div>
      </section>
    </main>
    <!--Script-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"></script>
    <script src="./javascript/cart.js"></script>
</body>

</html>